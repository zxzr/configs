function sendInfo(a){chrome[runtimeOrExtension].sendMessage({info:a})}function isHref(a){return-1!=href.indexOf(a)}function getAbsoluteUrl(b){return a=document.createElement("a"),a.href=b,a.href}function getVal(a){return localStorage[a]}function setVal(a,b){return localStorage[a]=b}function clicks(a){console.log(a);var b=document.createEvent("MouseEvents");b.initEvent("click",!0,!0),a[0].dispatchEvent(b)}String.prototype.GetValue=function(a){return a=new RegExp("(^|&)"+a+"=([^&]*)(&|$)"),a=this.substr(this.indexOf("?")+1).match(a),null!=a?unescape(a[2]):null};var href=document.location.href,jujilinkArr=[],count=0;$(document).ready(function(){isHref("www.iqiyi.com/v_")?FUN.iqiyi():isHref("v.qq.com/x/cover/")?FUN.vqq():isHref("tv.sohu.com")&&isHref("shtml")?FUN.tvsohu():isHref("film.sohu.com/album/")?FUN.fmsohu():isHref("tudou.com/albumplay/")?FUN.tudou():isHref("v.youku.com/v_show/")?FUN.vyouku():isHref("www.le.com/ptv/vplay/")?FUN.letv():isHref("www.mgtv.com/b/")?FUN.mgtv():isHref("v.pptv.com/show/")&&FUN.vpptv()}),FUN={iqiyi:function(){console.log("iqiyi>-1"),jujiliArr=[];var a=setInterval(function(){if(0!=$(".juji-list li").length){clearInterval(a);var b=$(".juji-list li").length;$(".juji-list li").each(function(a,c){c=$(this).attr("data-videolist-tvid");var d=$(this).attr("data-videolist-vid");jujiliArr.push([c,d]),a>=b-1&&FUN.ts_iqiyi()})}0!=$("ul.mod-play-list li a.piclist_img").length&&jujiliArr.length<0&&(clearInterval(a),b=$("ul.mod-play-list li a.piclist_img").length,$("ul.mod-play-list li a.piclist_img").each(function(a,c){c=$(this).attr("href"),console.log(c),jujilinkArr.push(getAbsoluteUrl(c)),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)}))},100)},ts_iqiyi:function(){$.each(jujiliArr,function(a,b){chrome.extension.sendRequest({type:"xhr",url:"http://cache.video.qiyi.com/jp/vi/"+b[0]+"/"+b[1]+"/?callback=crackIqiyi"},function(b){if(console.log(b,jujiliArr.length),"ok"==b.msg){var c=JSON.parse(b.data.replace("try{crackIqiyi(","").replace(");}catch(e){};",""));jujilinkArr.push(c.vu),jujiliArr.length==a+1&&FUN.postJujilink("setJujilink",jujilinkArr)}})})},vqq:function(){console.log("vqq>-1");var a=setInterval(function(){if($(".mod_episode .current a").attr("href"),0!=$(".mod_episode .item a").length){clearInterval(a);var c=$(".mod_episode .item a").length,d=getAbsoluteUrl($(".mod_episode .current a").attr("href"));$(".mod_episode .item a").each(function(a,b){b=$(this).attr("href"),console.log(b),jujilinkArr.push(getAbsoluteUrl(b)),console.log(jujilinkArr),a>=c-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}0!=$(".player_figure a").length&&(clearInterval(a),c=$(".player_figure a").length,d=getAbsoluteUrl($(".player_figure.current a").attr("href")),d!=href?document.location.href=d:$(".player_figure a").each(function(a,b){b=$(this).attr("href"),console.log(b),jujilinkArr.push(getAbsoluteUrl(b)),console.log(jujilinkArr),a>=c-1&&FUN.postJujilink("setJujilink",jujilinkArr)}))},100)},tvsohu:function(){console.log("tvsohu>-1");var a=setInterval(function(){if(0!=$(".list_juji li a").length){clearInterval(a);var b=$(".list_juji li a").length;$(".list_juji li a").each(function(a,c){c=$(this).attr("href"),console.log(c),jujilinkArr.push(getAbsoluteUrl(c)),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}},100)},fmsohu:function(){console.log("fmsohu>-1"),jujilinkArr.push(href),console.log(jujilinkArr),FUN.postJujilink("setJujilink",jujilinkArr)},tudou:function(){console.log("tudou>-1");var a=setInterval(function(){if(0!=$(".list_data a.item").length){clearInterval(a);var b=$(".list_data a.item").length;getAbsoluteUrl($(".list_data a.item.active").attr("href"))!=href&&clicks($(".list_data a.item.active")),$(".list_data a.item").each(function(a,c){c=$(this).attr("href"),console.log(c),jujilinkArr.push(getAbsoluteUrl(c)),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}},100)},vyouku:function(){console.log("vyouku>-1");var a=setInterval(function(){var c,b=$($(".drama-content").children().get(0)).children();count>10&&clearInterval(a),count++,0!=b.length&&(clearInterval(a),c=b.length,b.each(function(a,b){b=$(this).attr("item-id").replace("item_","id_").replace("==",".html"),console.log(b),jujilinkArr.push(getAbsoluteUrl(b)),console.log(jujilinkArr),a>=c-1&&FUN.postJujilink("setJujilink",jujilinkArr)}))},200)},letv:function(){console.log("letv>-1");var a=setInterval(function(){if(0!=$(".juji_grid li").length){clearInterval(a);var b=$(".juji_grid li").length;$(".juji_grid li").each(function(a,c){c="http://www.le.com/ptv/vplay/"+$(this).attr("data-vid")+".html",console.log(c),jujilinkArr.push(c),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}},500)},mgtv:function(){console.log("mgtv>-1");var a=setInterval(function(){if(0!=$("div[node-type='anthology-ullist-box'] li a").length){clearInterval(a);var b=$("div[node-type='anthology-ullist-box'] li a").length;$("div[node-type='anthology-ullist-box'] li a").each(function(a,c){c=$(this).attr("href"),console.log(c),jujilinkArr.push(getAbsoluteUrl(c)),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}},100)},vpptv:function(){console.log("vpptv>-1");var a=setInterval(function(){if(0!=$(".plist1 a[href^='http']").length){clearInterval(a);var b=$(".plist1 a[href^='http']").length;getAbsoluteUrl($(".plist1 a[href^='http'].now").attr("href"))!=href?clicks($(".plist1 a[href^='http'].now")):$(".plist1 a[href^='http']").each(function(a,c){c=$(this).attr("href"),console.log(c),jujilinkArr.push(getAbsoluteUrl(c)),console.log(jujilinkArr),a>=b-1&&FUN.postJujilink("setJujilink",jujilinkArr)})}0!=$(".plist2 a[href^='http'].now").length&&(clearInterval(a),b=$(".plist2 a[href^='http']").length,getAbsoluteUrl($(".plist2 a[href^='http'].now").attr("href"))!=href?clicks($(".plist2 a[href^='http'].now")):(jujilinkArr.push(href),console.log(jujilinkArr),FUN.postJujilink("setJujilink",jujilinkArr)))},100)},postJujilink:function(a,b){chrome.extension.sendRequest({type:a,urlArr:b},function(){layer.tips("\u5267\u96c6\u5df2\u7ecf\u52a0\u8f7d\u5b8c\u6bd5",".ufan-play",{tips:[1,"#3595CC"],time:4e3})})}},console={log:function(){}};